<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>JSON3.html</title>
  <!-- Include jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    $(document).ready(function() {
      $.get("songs.json", function(data) {
        // Store the JSON data in a variable
        var songsData = data;

        // Collect all unique genres
        var genreSet = new Set();
        for (var i = 0; i < songsData.length; i++) {
          var song = songsData[i];
          for (var j = 0; j < song.genres.length; j++) {
            genreSet.add(song.genres[j]);
          }
        }

        // Convert the Set to an array and optionally sort it
        var genreArray = Array.from(genreSet).sort();

        // Populate the <select> with the unique genres
        for (var k = 0; k < genreArray.length; k++) {
          $("#genreSelect").append("<option value='" + genreArray[k] + "'>" + genreArray[k] + "</option>");
        }

        // Filter button click event
        $("#filterBtn").click(function() {
          var selectedGenre = $("#genreSelect").val();
          var displayHtml = "";

          // Find and display titles of songs matching the selected genre
          for (var i = 0; i < songsData.length; i++) {
            var song = songsData[i];
            if (song.genres.includes(selectedGenre)) {
              displayHtml += "<p>" + song.title + "</p>";
            }
          }

          // Display the results
          $("#filteredSongs").html(displayHtml);
        });
      });
    });
  </script>
</head>
<body>
  <h1>Song List - Genre Filter</h1>
  
  <form>
    <label for="genreSelect">Select Genre:</label>
    <select id="genreSelect">
      <!-- Options will be populated dynamically from songs.json -->
    </select>
    <button type="button" id="filterBtn">Filter</button>
  </form>
  
  <div id="filteredSongs"></div>
  
  <p>
    <button onclick="window.location.href='json.html';">home</button>
  </p>
</body>
</html>
